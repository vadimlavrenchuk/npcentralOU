# JWT Authentication System - Implementation Complete

## –û–ø–∏—Å–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π

–°–∏—Å—Ç–µ–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ–≤–µ–¥–µ–Ω–∞ —Å Firebase Google Auth –Ω–∞ –ª–æ–∫–∞–ª—å–Ω—É—é JWT –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é.

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### Backend
- JWT —Ç–æ–∫–µ–Ω—ã –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ (—Å—Ä–æ–∫ –∂–∏–∑–Ω–∏: 7 –¥–Ω–µ–π)
- –ü–∞—Ä–æ–ª–∏ —Ö–µ—à–∏—Ä—É—é—Ç—Å—è —Å bcrypt (salt rounds: 10)
- –í—Å–µ API –º–∞—Ä—à—Ä—É—Ç—ã –∑–∞—â–∏—â–µ–Ω—ã middleware –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
- Role-based access control (RBAC)

### –ú–æ–¥–µ–ª—å User
```typescript
{
  username: string (—É–Ω–∏–∫–∞–ª—å–Ω—ã–π, lowercase)
  password: string (—Ö–µ—à bcrypt)
  name: string
  role: UserRole (admin | chief_mechanic | accountant | mechanic)
  isActive: boolean
  createdAt: Date
  updatedAt: Date
}
```

## üìã API Endpoints

### –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è (–ø—É–±–ª–∏—á–Ω—ã–µ)
- `POST /api/auth/login` - –í—Ö–æ–¥ –ø–æ username/password
- `POST /api/auth/logout` - –í—ã—Ö–æ–¥
- `GET /api/auth/me` - –ü–æ–ª—É—á–∏—Ç—å —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (—Ç—Ä–µ–±—É–µ—Ç —Ç–æ–∫–µ–Ω)

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ (—Ç–æ–ª—å–∫–æ admin)
- `GET /api/users` - –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- `POST /api/users` - –°–æ–∑–¥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `PATCH /api/users/:id` - –û–±–Ω–æ–≤–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `PATCH /api/users/:id/role` - –ò–∑–º–µ–Ω–∏—Ç—å —Ä–æ–ª—å
- `PATCH /api/users/:id/toggle-status` - –ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å/—Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å
- `DELETE /api/users/:id` - –£–¥–∞–ª–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

## üéØ –î–µ—Ñ–æ–ª—Ç–Ω—ã–π –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä

–ü—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ seed —Å–∫—Ä–∏–ø—Ç–∞ —Å–æ–∑–¥–∞–µ—Ç—Å—è:

```
Username: admin
Password: admin123
Role: admin
```

**‚ö†Ô∏è –í–ê–ñ–ù–û:** –ò–∑–º–µ–Ω–∏—Ç–µ –ø–∞—Ä–æ–ª—å –ø–æ—Å–ª–µ –ø–µ—Ä–≤–æ–≥–æ –≤—Ö–æ–¥–∞!

## üöÄ –ó–∞–ø—É—Å–∫

### –ü–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å –±–∞–∑—É —Å –¥–µ—Ñ–æ–ª—Ç–Ω—ã–º –∞–¥–º–∏–Ω–æ–º
```bash
cd backend
npm run seed
```

### –ó–∞–ø—É—Å–∫ backend
```bash
cd backend
npm run dev
```

### –ó–∞–ø—É—Å–∫ frontend
```bash
npm run dev
```

## üé® Frontend

### –°—Ç—Ä–∞–Ω–∏—Ü–∞ –≤—Ö–æ–¥–∞
- –ü—Ä–æ—Å—Ç–∞—è —Ñ–æ—Ä–º–∞ username/password
- –ù–µ—Ç —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ–π —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
- –°–æ–æ–±—â–µ–Ω–∏–µ: "–î–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–∞ –æ–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É"

### –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å `/user-management`
–î–æ—Å—Ç—É–ø–Ω–∞ —Ç–æ–ª—å–∫–æ –¥–ª—è —Ä–æ–ª–∏ `admin`:
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- ‚úÖ –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ä–æ–ª–∏ (Admin, Chief Mechanic, Accountant, Mechanic)
- ‚úÖ –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞/—Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –∞–∫–∫–∞—É–Ω—Ç–æ–≤
- ‚úÖ –£–¥–∞–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- üîí –ó–∞—â–∏—Ç–∞ –æ—Ç —É–¥–∞–ª–µ–Ω–∏—è/–±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞

## üîë JWT –¢–æ–∫–µ–Ω—ã

### –•—Ä–∞–Ω–µ–Ω–∏–µ
- –¢–æ–∫–µ–Ω—ã —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ `localStorage` –ø–æ–¥ –∫–ª—é—á–æ–º `auth_token`
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –≤ –∑–∞–≥–æ–ª–æ–≤–æ–∫ `Authorization: Bearer <token>`

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–æ–∫–µ–Ω–æ–≤
- Backend middleware –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Ç–æ–∫–µ–Ω –Ω–∞ –∫–∞–∂–¥–æ–º –∑–∞—â–∏—â–µ–Ω–Ω–æ–º –º–∞—Ä—à—Ä—É—Ç–µ
- –ü—Ä–∏ –Ω–µ–≤–∞–ª–∏–¥–Ω–æ–º —Ç–æ–∫–µ–Ω–µ - –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ `/login`
- –ü—Ä–∏ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω–æ–º –∞–∫–∫–∞—É–Ω—Ç–µ - –æ—à–∏–±–∫–∞ 403

## üõ°Ô∏è Permissions

–î–æ–±–∞–≤–ª–µ–Ω–æ –Ω–æ–≤–æ–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ:
- `canManageUsers: boolean` - –¢–æ–ª—å–∫–æ –¥–ª—è admin, –¥–æ—Å—Ç—É–ø –∫ `/user-management`

## üìù –ß—Ç–æ –±—ã–ª–æ —É–¥–∞–ª–µ–Ω–æ

- ‚ùå Firebase SDK –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- ‚ùå Google Sign-In
- ‚ùå Firebase UID –≤ –º–æ–¥–µ–ª–∏ User
- ‚ùå –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- ‚ùå Email –ø–æ–ª–µ (–∑–∞–º–µ–Ω–µ–Ω–æ –Ω–∞ username)

## üéì –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (—á–µ—Ä–µ–∑ API)
```bash
POST /api/users
Authorization: Bearer <admin_token>
Content-Type: application/json

{
  "username": "mechanic1",
  "password": "securepass123",
  "name": "–ò–≤–∞–Ω –ú–µ—Ö–∞–Ω–∏–∫",
  "role": "mechanic"
}
```

### –í—Ö–æ–¥
```bash
POST /api/auth/login
Content-Type: application/json

{
  "username": "admin",
  "password": "admin123"
}

Response:
{
  "token": "eyJhbGc...",
  "user": {
    "id": "...",
    "username": "admin",
    "name": "Administrator",
    "role": "admin",
    "isActive": true
  }
}
```

## ‚öôÔ∏è Environment Variables

–î–æ–±–∞–≤—å—Ç–µ –≤ `.env` (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):
```env
JWT_SECRET=your-secret-key-change-in-production
JWT_EXPIRES_IN=7d
```

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é:
- JWT_SECRET: 'your-secret-key-change-in-production'
- JWT_EXPIRES_IN: '7d'

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω—ã–µ –ø—Ä–∞–∫—Ç–∏–∫–∏

1. ‚úÖ –ù–æ–≤—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å–æ–∑–¥–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –∞–¥–º–∏–Ω–æ–º
2. ‚úÖ –ü–∞—Ä–æ–ª–∏ —Ö–µ—à–∏—Ä—É—é—Ç—Å—è, –Ω–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –æ—Ç–∫—Ä—ã—Ç–æ–º –≤–∏–¥–µ
3. ‚úÖ JWT —Ç–æ–∫–µ–Ω—ã –∏–º–µ—é—Ç —Å—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è
4. ‚úÖ –ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –Ω–µ –º–æ–≥—É—Ç –≤–æ–π—Ç–∏
5. ‚úÖ –í—Å–µ API –∑–∞—â–∏—â–µ–Ω—ã –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–µ–π
6. ‚úÖ CORS –Ω–∞—Å—Ç—Ä–æ–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ

## üì¶ –ù–æ–≤—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

Backend:
```json
{
  "bcryptjs": "^2.4.3",
  "jsonwebtoken": "^9.0.2",
  "cookie-parser": "^1.4.6",
  "@types/bcryptjs": "^2.4.6",
  "@types/jsonwebtoken": "^9.0.5",
  "@types/cookie-parser": "^1.4.6"
}
```

## ‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ seed: `npm run seed`
2. –í–æ–π–¥–∏—Ç–µ —Å `admin`/`admin123`
3. –°–æ–∑–¥–∞–π—Ç–µ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —á–µ—Ä–µ–∑ `/user-management`
4. –í—ã–π–¥–∏—Ç–µ –∏ –≤–æ–π–¥–∏—Ç–µ –ø–æ–¥ –Ω–æ–≤—ã–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º
5. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –±–ª–æ–∫–∏—Ä–æ–≤–∫—É –∞–∫–∫–∞—É–Ω—Ç–∞

## üéâ –ì–æ—Ç–æ–≤–æ!

–°–∏—Å—Ç–µ–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é. –í—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —É–ø—Ä–∞–≤–ª—è—é—Ç—Å—è —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å.
